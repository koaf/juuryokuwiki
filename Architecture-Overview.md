# Architecture Overview - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

### å…¨ä½“åƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Main.java                               â”‚
â”‚                    ï¼ˆã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆï¼‰                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Game.java                               â”‚
â”‚                    ï¼ˆã‚²ãƒ¼ãƒ é€²è¡Œç®¡ç†ï¼‰                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Board   â”‚  â”‚  Judge   â”‚  â”‚ Player[] â”‚  â”‚ Recoder  â”‚       â”‚
â”‚  â”‚  (UI)    â”‚  â”‚  (åˆ¤å®š)  â”‚  â”‚(ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼)â”‚  â”‚  (è¨˜éŒ²)  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆï¼ˆãƒ•ãƒ©ãƒƒãƒˆï¼‰

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€ã™ã¹ã¦ã®ã‚¯ãƒ©ã‚¹ãŒåŒä¸€éšå±¤ã«ã‚ã‚Šã¾ã™ã€‚

### ã‚³ã‚¢ã‚¯ãƒ©ã‚¹ï¼ˆã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯ï¼‰

| ã‚¯ãƒ©ã‚¹ | å½¹å‰² |
|--------|------|
| `Main` | ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ |
| `Game` | ã‚²ãƒ¼ãƒ ã®é€²è¡Œã‚’ç®¡ç† |
| `Judge` | ç›¤é¢ã®çŠ¶æ…‹ç®¡ç†ã€å‹æ•—åˆ¤å®š |
| `Recoder` | æ£‹è­œã®è¨˜éŒ²ã¨ä¿å­˜ |

### ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚¯ãƒ©ã‚¹

| ã‚¯ãƒ©ã‚¹ | å½¹å‰² |
|--------|------|
| `Player` | ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®æŠ½è±¡åŸºåº•ã‚¯ãƒ©ã‚¹ |
| `Man` | äººé–“ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆUIå…¥åŠ›ã‚’å¾…ã¤ï¼‰ |
| `Com` | ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆAIãƒ­ã‚¸ãƒƒã‚¯ï¼‰ |

### UIã‚¯ãƒ©ã‚¹

| ã‚¯ãƒ©ã‚¹ | å½¹å‰² | ç¶™æ‰¿å…ƒ |
|--------|------|--------|
| `Board` | ãƒ¡ã‚¤ãƒ³ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒ»ç›¤é¢è¡¨ç¤º | `JFrame` |
| `ImageButton` | ç”»åƒä»˜ããƒœã‚¿ãƒ³ | `JButton` |
| `PlayerPanel` | ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æƒ…å ±è¡¨ç¤ºãƒ‘ãƒãƒ« | `JPanel` |
| `BottomScrollPanel` | æ£‹è­œè¡¨ç¤ºãƒ‘ãƒãƒ« | `JScrollPane` |
| `Sound` | åŠ¹æœéŸ³ã®å†ç”Ÿ | - |

### AIã‚¯ãƒ©ã‚¹

| ã‚¯ãƒ©ã‚¹ | å½¹å‰² |
|--------|------|
| `MonteCarloPlayer` | ãƒ¢ãƒ³ãƒ†ã‚«ãƒ«ãƒ­æœ¨æ¢ç´¢ã«ã‚ˆã‚‹AI |
| `QLearningPlayer` | Qå­¦ç¿’ã«ã‚ˆã‚‹AIï¼ˆVersion 1ï¼‰ |
| `QLearningPlayerV2` | Qå­¦ç¿’ã«ã‚ˆã‚‹AIï¼ˆVersion 2ã€Judgeå½¢å¼å¯¾å¿œï¼‰ |
| `QLearningTrainer` | Qå­¦ç¿’ã®ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ—ãƒ­ã‚°ãƒ©ãƒ  |

### ãƒ„ãƒ¼ãƒ«ã‚¯ãƒ©ã‚¹

| ã‚¯ãƒ©ã‚¹ | å½¹å‰² |
|--------|------|
| `ModelValidator` | Qå­¦ç¿’ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®æ¤œè¨¼ |
| `ModelOptimizer` | Qå­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®æœ€é©åŒ–ï¼ˆåœ§ç¸®ï¼‰ |

## ğŸ”„ å‡¦ç†ãƒ•ãƒ­ãƒ¼

### ã‚²ãƒ¼ãƒ é–‹å§‹ã€œçµ‚äº†

```
1. Main.main()
   â”‚
   â””â”€> Game ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿
       â”‚
       â”œâ”€> Board åˆæœŸåŒ–ï¼ˆUIæ§‹ç¯‰ï¼‰
       â”œâ”€> Judge åˆæœŸåŒ–ï¼ˆç›¤é¢åˆæœŸåŒ–ï¼‰
       â”œâ”€> Player[] åˆæœŸåŒ–ï¼ˆMan/Com ç”Ÿæˆï¼‰
       â””â”€> Recoder åˆæœŸåŒ–
       â”‚
   â””â”€> Game.play()
       â”‚
       â””â”€> ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—
           â”‚
           â”œâ”€> Player.put() ã§æ‰‹ã‚’å–å¾—
           â”‚   â”œâ”€> Man: ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯å¾…ã¡
           â”‚   â””â”€> Com: AIã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§è¨ˆç®—
           â”‚
           â”œâ”€> Judge.canPut() ã§åˆæ³•æ‰‹ãƒã‚§ãƒƒã‚¯
           â”œâ”€> Judge.put() ã§çŸ³ã‚’é…ç½®
           â”œâ”€> Board.draw() ã§è¡¨ç¤ºæ›´æ–°
           â”œâ”€> Recoder.recode() ã§è¨˜éŒ²
           â”œâ”€> Judge.checkWinner() ã§å‹æ•—åˆ¤å®š
           â”‚
           â””â”€> å‹æ•—æ±ºå®š or å¼•ãåˆ†ã‘ã§ãƒ«ãƒ¼ãƒ—çµ‚äº†
       â”‚
       â””â”€> Recoder.log() ã§æ£‹è­œä¿å­˜
       â””â”€> Board.dispose() ã§ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦é–‰ã˜ã‚‹
       â”‚
   â””â”€> æ¬¡ã®ã‚²ãƒ¼ãƒ ã¸ï¼ˆwhile(true)ãƒ«ãƒ¼ãƒ—ï¼‰
```

### AI ã®åˆ¤æ–­ãƒ•ãƒ­ãƒ¼

```
Com.put() å‘¼ã³å‡ºã—
    â”‚
    â”œâ”€> Judge.getGrid() ã§ç¾åœ¨ã®ç›¤é¢å–å¾—
    â”‚
    â”œâ”€> AIã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å®Ÿè¡Œ
    â”‚   â”‚
    â”‚   â”œâ”€> MonteCarloPlayer.selectMove()
    â”‚   â”‚   â”œâ”€> å„åˆæ³•æ‰‹ã«å¯¾ã—ã¦
    â”‚   â”‚   â”œâ”€> ãƒ©ãƒ³ãƒ€ãƒ ãƒ—ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå®Ÿè¡Œ
    â”‚   â”‚   â””â”€> å‹ç‡æœ€å¤§ã®æ‰‹ã‚’é¸æŠ
    â”‚   â”‚
    â”‚   â””â”€> QLearningPlayerV2.selectMove()
    â”‚       â”œâ”€> ç›¤é¢ã‚’æ–‡å­—åˆ—åŒ–
    â”‚       â”œâ”€> Qå€¤ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‚ç…§
    â”‚       â””â”€> Îµ-greedy ã§æ‰‹ã‚’é¸æŠ
    â”‚
    â””â”€> é¸æŠã—ãŸåˆ—ç•ªå·ã‚’è¿”ã™
```

## ğŸ¨ UI ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         JFrame (Board)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚                                    â”‚          â”‚
â”‚ Player   â”‚           JPanel (grid)            â”‚ Player   â”‚
â”‚ Panel    â”‚  â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”   â”‚ Panel    â”‚
â”‚ (left)   â”‚  â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚ (right)  â”‚
â”‚          â”‚  â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤   â”‚          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ç”»åƒ â”‚  â”‚  â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤   â”‚ â”‚ ç”»åƒ â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚ â””â”€â”€â”€â”€â”€â”˜  â”‚
â”‚ åå‰     â”‚  â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤   â”‚ åå‰     â”‚
â”‚ èª¬æ˜     â”‚  â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚ èª¬æ˜     â”‚
â”‚          â”‚  â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤   â”‚          â”‚
â”‚          â”‚  â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚          â”‚
â”‚          â”‚  â”œâ”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”¤   â”‚          â”‚
â”‚          â”‚  â”‚ [1] [2] [3] [4] [5] [6] [7] â”‚   â”‚          â”‚
â”‚          â”‚  â”‚      ImageButtons            â”‚   â”‚          â”‚
â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                BottomScrollPanel (æ£‹è­œè¡¨ç¤º)                 â”‚
â”‚  â—‹ã•ã‚“ã¯ã€â—‹ã‚’1ã«ç½®ãã¾ã™ã€‚                                 â”‚
â”‚  Ã—ã•ã‚“ã¯ã€Ã—ã‚’4ã«ç½®ãã¾ã™ã€‚                                 â”‚
â”‚  ...                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

### ç›¤é¢ãƒ‡ãƒ¼ã‚¿ï¼ˆJudge.gridï¼‰

```java
int[][] grid = new int[6][7];  // 6è¡Œ7åˆ—

// å€¤ã®æ„å‘³:
// -1: ç©ºï¼ˆçŸ³ãŒç½®ã‹ã‚Œã¦ã„ãªã„ï¼‰
//  0: å…ˆæ‰‹ã®çŸ³
//  1: å¾Œæ‰‹ã®çŸ³
```

### ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼é †åº

```java
int order;  // 0: å…ˆæ‰‹, 1: å¾Œæ‰‹

// çŸ³ã®è¡¨ç¤º:
// order == 0 â†’ â—‹ï¼ˆèµ¤ã„çŸ³ï¼‰
// order == 1 â†’ Ã—ï¼ˆé’ã„çŸ³ï¼‰
```

## ğŸ”— ã‚¯ãƒ©ã‚¹é–“ã®ä¾å­˜é–¢ä¿‚

```
Main
  â””â”€> Game
        â”œâ”€> Board â”€â”€â”€â”€â”€> ImageButton
        â”‚     â”‚          BottomScrollPanel
        â”‚     â”‚          PlayerPanel
        â”‚     â””â”€> Sound
        â”‚
        â”œâ”€> Judge
        â”‚
        â”œâ”€> Player (abstract)
        â”‚     â”œâ”€> Man â”€â”€> Board
        â”‚     â””â”€> Com â”€â”€> MonteCarloPlayer
        â”‚                 QLearningPlayer(V2)
        â”‚
        â””â”€> Recoder
```

---

[â† Game Rules](Game-Rules.md) | [Class Diagram â†’](Class-Diagram.md)
