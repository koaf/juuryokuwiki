# Class Diagram - クラス図

## 📐 継承関係

### プレイヤークラス階層

```
                    ┌─────────────────┐
                    │    Player       │ ← 抽象クラス
                    │   (abstract)    │
                    ├─────────────────┤
                    │ - name: String  │
                    │ - order: int    │
                    │ - message: String│
                    │ - imageIcon: ImageIcon│
                    ├─────────────────┤
                    │ + put(Judge): int│ ← 抽象メソッド
                    │ + getName(): String│
                    │ + getOrder(): int│
                    │ + getStone(): String│
                    │ + getImageIcon(): ImageIcon│
                    │ + getMessage(): String│
                    └────────┬────────┘
                             │
              ┌──────────────┴──────────────┐
              │                             │
    ┌─────────▼─────────┐       ┌─────────▼─────────┐
    │       Man         │       │       Com         │
    ├───────────────────┤       ├───────────────────┤
    │ - board: Board    │       │                   │
    ├───────────────────┤       ├───────────────────┤
    │ + put(Judge): int │       │ + put(Judge): int │
    │  (ボタン入力を待つ) │       │  (AIアルゴリズム)  │
    └───────────────────┘       └───────────────────┘
```

### UIクラス階層

```
    ┌───────────────┐
    │    JFrame     │  (Swing)
    └───────┬───────┘
            │
    ┌───────▼───────┐
    │    Board      │
    ├───────────────┤
    │ - row: int    │
    │ - col: int    │
    │ - grid: JLabel[][]│
    │ - buttons: JButton[]│
    │ - bottomScrollPanel│
    │ - leftPanel   │
    │ - rightPanel  │
    ├───────────────┤
    │ + draw()      │
    │ + dispKifu()  │
    │ + showResult()│
    │ + actionPerformed()│
    └───────────────┘


    ┌───────────────┐
    │   JButton     │  (Swing)
    └───────┬───────┘
            │
    ┌───────▼───────┐
    │  ImageButton  │
    ├───────────────┤
    │ - index: int  │
    ├───────────────┤
    │ + getIndex(): int│
    └───────────────┘


    ┌───────────────┐
    │    JPanel     │  (Swing)
    └───────┬───────┘
            │
    ┌───────▼───────┐
    │  PlayerPanel  │
    ├───────────────┤
    │ - imageLabel  │
    │ - nameLabel   │
    │ - infoArea    │
    ├───────────────┤
    │ + setData(Player)│
    └───────────────┘


    ┌───────────────┐
    │ JScrollPane   │  (Swing)
    └───────┬───────┘
            │
    ┌───────▼───────┐
    │BottomScrollPanel│
    ├───────────────┤
    │ - text: ScrollTextArea│
    ├───────────────┤
    │ + append(String)│
    └───────────────┘
```

## 📊 関連図

### ゲームコアの関連

```
┌───────────────┐         ┌───────────────┐
│     Main      │────────>│     Game      │
└───────────────┘         └───────┬───────┘
                                  │ 保持
            ┌─────────────────────┼─────────────────────┐
            │                     │                     │
            ▼                     ▼                     ▼
    ┌───────────────┐    ┌───────────────┐    ┌───────────────┐
    │    Board      │    │    Judge      │    │   Recoder     │
    ├───────────────┤    ├───────────────┤    ├───────────────┤
    │ UI表示        │    │ 盤面管理      │    │ 棋譜記録      │
    │ ユーザー入力   │    │ 勝敗判定      │    │ ファイル保存  │
    └───────────────┘    └───────────────┘    └───────────────┘
            │
            ├────────────────────────────────────────────┐
            │                     │                      │
            ▼                     ▼                      ▼
    ┌───────────────┐    ┌───────────────┐    ┌───────────────┐
    │  ImageButton  │    │  PlayerPanel  │    │BottomScrollPanel│
    └───────────────┘    └───────────────┘    └───────────────┘
```

### AIクラスの関連

```
┌───────────────┐
│     Com       │
└───────┬───────┘
        │ 使用
        ▼
┌───────────────────────────────────────────────────┐
│                  AIアルゴリズム                     │
├───────────────────────────────────────────────────┤
│                                                    │
│  ┌─────────────────┐    ┌─────────────────┐      │
│  │MonteCarloPlayer │    │ QLearningPlayer │      │
│  ├─────────────────┤    ├─────────────────┤      │
│  │ランダムプレイアウト │    │ Q値テーブル     │      │
│  │確率的評価        │    │ 強化学習        │      │
│  └─────────────────┘    └─────────────────┘      │
│                              │                    │
│                              ▼                    │
│                    ┌─────────────────┐           │
│                    │QLearningPlayerV2│           │
│                    ├─────────────────┤           │
│                    │Judge形式対応    │           │
│                    └─────────────────┘           │
│                              │                    │
│                              ▼                    │
│                    ┌─────────────────┐           │
│                    │ QLearningTrainer│           │
│                    ├─────────────────┤           │
│                    │ 学習ループ      │           │
│                    │ モデル保存/読込 │           │
│                    └─────────────────┘           │
│                              │                    │
│            ┌─────────────────┼─────────────────┐│
│            ▼                 ▼                  ▼│
│  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐
│  │ ModelValidator  │ │ ModelOptimizer  │ │  .datファイル   │
│  │ モデル検証      │ │ モデル最適化    │ │  学習済みモデル │
│  └─────────────────┘ └─────────────────┘ └─────────────────┘
└───────────────────────────────────────────────────┘
```

## 🔢 クラス一覧（詳細）

### ゲームコア

| クラス | 種別 | 説明 |
|--------|------|------|
| `Main` | 通常 | エントリーポイント |
| `Game` | 通常 | ゲーム進行管理 |
| `Judge` | 通常 | 審判、盤面・勝敗管理 |
| `Recoder` | 通常 | 棋譜記録・保存 |

### プレイヤー

| クラス | 種別 | 説明 |
|--------|------|------|
| `Player` | 抽象 | プレイヤー基底クラス |
| `Man` | 通常 | 人間プレイヤー |
| `Com` | 通常 | コンピュータプレイヤー |

### UI

| クラス | 種別 | 継承元 |
|--------|------|--------|
| `Board` | 通常 | `JFrame`, `ActionListener` |
| `ImageButton` | 通常 | `JButton` |
| `PlayerPanel` | 通常 | `JPanel` |
| `BottomScrollPanel` | 通常 | `JScrollPane` |
| `Sound` | 通常 | - |

### AI

| クラス | 種別 | 説明 |
|--------|------|------|
| `MonteCarloPlayer` | 通常 | モンテカルロ法AI |
| `QLearningPlayer` | 通常 | Q学習AI (v1) |
| `QLearningPlayerV2` | 通常 | Q学習AI (v2) |
| `QLearningTrainer` | 通常 | 学習実行プログラム |

### ツール

| クラス | 種別 | 説明 |
|--------|------|------|
| `ModelValidator` | 通常 | モデル検証 |
| `ModelOptimizer` | 通常 | モデル最適化 |

## 💡 インターフェース実装

```
┌─────────────────────────────────┐
│      ActionListener            │ (java.awt.event)
│      (インターフェース)         │
└──────────────┬──────────────────┘
               │ 実装
               ▼
       ┌───────────────┐
       │    Board      │
       └───────────────┘
```

---

[← Architecture Overview](Architecture-Overview.md) | [Main →](classes/Main.md)
